/* assets/css/main.css */

/* Base tokens */
:root{
  --font-sans: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  --font-mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;

  --text: #111;
  --muted: #444;
  --bg: #fff;

  --panel: #fafafa;
  --panel-2: #f6f6f6;
  --border: #e6e6e6;
  --border-strong: #cfcfcf;

  --link: #0b57d0;
  --link-hover: #063a8a;
  --link-visited: #5b2aa6;

  --container: 980px;

  --radius: 10px;

  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 22px;
  --space-6: 28px;
  --space-7: 60px;

  --line: 1.65;
}

/* Optional dark mode */
@media (prefers-color-scheme: dark){
  :root{
    --text: #f2f2f2;
    --muted: #c7c7c7;
    --bg: #0f0f10;
    --panel: #161618;
    --panel-2: #1c1c1f;
    --border: #2b2b30;
    --border-strong: #3a3a40;
    --link: #7bb0ff;
    --link-hover: #a7c9ff;
    --link-visited: #c39bff;
  }
}

/* User override themes (take precedence over system preference) */
html[data-theme="light"]{
  --text: #111;
  --muted: #444;
  --bg: #fff;
  --panel: #fafafa;
  --panel-2: #f6f6f6;
  --border: #e6e6e6;
  --border-strong: #cfcfcf;
  --link: #0b57d0;
  --link-hover: #063a8a;
  --link-visited: #5b2aa6;
}

html[data-theme="dark"]{
  --text: #f2f2f2;
  --muted: #c7c7c7;
  --bg: #0f0f10;
  --panel: #161618;
  --panel-2: #1c1c1f;
  --border: #2b2b30;
  --border-strong: #3a3a40;
  --link: #7bb0ff;
  --link-hover: #a7c9ff;
  --link-visited: #c39bff;
}

html { color-scheme: light dark; }
html[data-theme="light"] { color-scheme: light; }
html[data-theme="dark"] { color-scheme: dark; }
body{
  font-family: var(--font-sans);
  line-height: var(--line);
  color: var(--text);
  background: var(--bg);
  margin: 0;
}

/* Layout container used by layouts/pages */
.container{
  max-width: var(--container);
  margin: 0 auto;
  padding: var(--space-6) 18px var(--space-7);
}

/* Typography */
h1{ font-size: 28px; margin: 0 0 var(--space-2); line-height: 1.25; }
h2{ font-size: 20px; margin: var(--space-5) 0 var(--space-2); line-height: 1.3; }
h3{ font-size: 16px; margin: var(--space-4) 0 var(--space-2); line-height: 1.35; }

p{ margin: 0 0 var(--space-3); }
ul, ol{ margin: 0 0 var(--space-3); padding-left: 1.2em; }
li{ margin: 0 0 var(--space-1); }

a:link{ color: var(--link); text-decoration: none; }
a:visited{ color: var(--link-visited); text-decoration: none; }
a:hover{ color: var(--link-hover); text-decoration: underline; text-underline-offset: 2px; }
a:focus-visible{ outline: 2px solid var(--border-strong); outline-offset: 2px; text-decoration: underline; text-underline-offset: 2px; }

/* Prose-only: keep links visibly underlined by default */
.note-body a:link,
.note-body a:visited{
  text-decoration: underline;
  text-underline-offset: 2px;
}

hr{ border: 0; border-top: 1px solid var(--border); margin: var(--space-5) 0; }

/* Code */
code, pre{ font-family: var(--font-mono); }
code{
  font-size: 0.95em;
  padding: 0.15em 0.35em;
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 6px;
}
pre{
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: var(--radius);
  padding: var(--space-3);
  overflow: auto;
  margin: 0 0 var(--space-4);
}
pre code{
  border: 0;
  background: transparent;
  padding: 0;
}

/* Blockquote */
blockquote{
  margin: var(--space-4) 0;
  padding: var(--space-2) var(--space-3);
  border-left: 4px solid var(--border-strong);
  background: var(--panel-2);
}

/* Tables (make wide tables scroll on small screens) */
table{
  border-collapse: collapse;
  width: 100%;
  margin: var(--space-3) 0 var(--space-4);
}
th, td{
  border: 1px solid var(--border);
  padding: 10px;
  text-align: left;
  vertical-align: top;
}
th{ background: var(--panel-2); }
.table-wrap{ overflow-x: auto; }

/* Reuse the HTML-insert components (so Notes can match) */
.kicker{
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .04em;
  font-size: 12px;
  color: var(--muted);
}
.lede{ font-size: 16px; opacity: .92; }

.prompt{
  border-left: 4px solid var(--border-strong);
  background: var(--panel-2);
  padding: 12px;
  margin: var(--space-5) 0;
}

.box{
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px 16px;
  background: var(--panel);
  margin: var(--space-4) 0 var(--space-3);
}

.small{ font-size: 13px; opacity: .92; }
.cite{ font-size: 13px; }

/* Diagrams */
figure.diagram{ margin: var(--space-4) 0; }
figure.diagram img,
figure.diagram svg,
figure.diagram object{
  display: block;
  max-width: 100%;
  height: auto;
}
figure.diagram figcaption{
  font-size: 13px;
  color: var(--muted);
  margin-top: 8px;
}

/* Small utility */
.muted{ color: var(--muted); }

.site-header{
  border-bottom: 1px solid var(--border);
  background: var(--bg);
}
.site-header .container{
  padding-top: 16px;
  padding-bottom: 16px;
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 18px;
}
.site-title a{
  text-decoration: none;
  font-weight: 700;
  color: var(--text);
}
.site-nav a{
  margin-left: 14px;
}
.theme-toggle{
  margin-left: 14px;
  font: inherit;
  font-size: 12px;
  line-height: 1.2;
  padding: 4px 8px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--panel);
  color: var(--text);
  cursor: pointer;
}
.theme-toggle:hover{
  border-color: var(--border-strong);
}
.site-footer{
  border-top: 1px solid var(--border);
  margin-top: 40px;
}
.site-footer .container{
  padding-top: 18px;
  padding-bottom: 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;
}

/* Notes index list (no bullets, no underline) */
.note-index{ margin-top: var(--space-3); }
.note-index-item{ display: grid; grid-template-columns: 110px 1fr; align-items: baseline; column-gap: 14px; padding: 8px 0; border-bottom: 1px solid var(--border); }
.note-index-item:last-child{ border-bottom: 0; }
.note-index-link:link,
.note-index-link:active,
.note-index-link:focus{
  text-decoration: none !important;
  color: var(--link);
  font-weight: 600;
}
.note-index-link:visited{
  text-decoration: none !important;
  color: var(--link-visited);
  font-weight: 600;
}
.note-index-link:hover{
  color: var(--link-hover);
  text-decoration: underline;
  text-underline-offset: 2px;
}
.note-index-link:focus-visible{
  outline: 2px solid var(--border-strong);
  outline-offset: 2px;
}
.note-index-date{ font-size: 13px; color: var(--muted); white-space: nowrap; text-align: right; }

@media (max-width: 640px){
  .note-index-item{ grid-template-columns: 1fr; }
  .note-index-date{ text-align: left; }
}