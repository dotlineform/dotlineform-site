/* assets/css/main.css */

/* Base tokens */
:root{
  --font-sans: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  --font-mono: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;

  --text: #111;
  --muted: #444;
  --bg: #fbfaf7; /* Slightly warm off-white (nicer for reading) */

  --panel: #fafafa;
  --panel-2: #f6f6f6;
  --border: #e6e6e6;
  --border-strong: #cfcfcf;

  --link: #3f3f3f;
  --link-hover: #1e1e1e;
  --link-visited: #5b2aa6;

  --container: 980px;

  --radius: 10px;

  --space-1: 6px;
  --space-2: 10px;
  --space-3: 14px;
  --space-4: 18px;
  --space-5: 22px;
  --space-6: 28px;
  --space-7: 60px;

  --line: 1.65;

  --moment-measure: 72ch; /* adjust: 60ch–80ch typical */
  --content-measure: var(--moment-measure); /* shared prose/media measure for new layouts */
}

/* Optional dark mode */
@media (prefers-color-scheme: dark){
  :root{
    --text: #f2f2f2;
    --muted: #c7c7c7;
    --bg: #0f0f10;
    --panel: #161618;
    --panel-2: #1c1c1f;
    --border: #2b2b30;
    --border-strong: #3a3a40;
    --link: #7bb0ff;
    --link-hover: #a7c9ff;
    --link-visited: #c39bff;
  }
}

/* User override themes (take precedence over system preference) */
html[data-theme="light"]{
  --text: #111;
  --muted: #444;
  --bg: #fff;
  --panel: #fafafa;
  --panel-2: #f6f6f6;
  --border: #e6e6e6;
  --border-strong: #cfcfcf;
  --link: #3f3f3f;
  --link-hover: #1e1e1e;
  --link-visited: #5b2aa6;
}

html[data-theme="dark"]{
  --text: #f2f2f2;
  --muted: #c7c7c7;
  --bg: #0f0f10;
  --panel: #161618;
  --panel-2: #1c1c1f;
  --border: #2b2b30;
  --border-strong: #3a3a40;
  --link: #7bb0ff;
  --link-hover: #a7c9ff;
  --link-visited: #c39bff;
}

html { color-scheme: light dark; }
html[data-theme="light"] { color-scheme: light; }
html[data-theme="dark"] { color-scheme: dark; }
body{
  font-family: var(--font-sans);
  line-height: var(--line);
  color: var(--text);
  background: var(--bg);
  margin: 0;
}

/* Layout container used by layouts/pages */
.container{
  max-width: var(--container);
  margin: 0 auto;
  padding: var(--space-6) 18px var(--space-7);
}

/* Typography */
h1{ font-size: 28px; margin: 0 0 var(--space-2); line-height: 1.25; }
h2{ font-size: 20px; margin: var(--space-5) 0 var(--space-2); line-height: 1.3; }
h3{ font-size: 16px; margin: var(--space-4) 0 var(--space-2); line-height: 1.35; }

p{ margin: 0 0 var(--space-3); }
ul, ol{ margin: 0 0 var(--space-3); padding-left: 1.2em; }
li{ margin: 0 0 var(--space-1); }

a:link{ color: var(--link); text-decoration: none; }
a:visited{ color: var(--link-visited); text-decoration: none; }
a:hover{ color: var(--link-hover); text-decoration: underline; text-underline-offset: 2px; }
a:focus-visible{ outline: 2px solid var(--border-strong); outline-offset: 2px; text-decoration: underline; text-underline-offset: 2px; }


hr{ border: 0; border-top: 1px solid var(--border); margin: var(--space-5) 0; }

/* Align horizontal rules to the shared reading measure on content pages */
.page hr{
  max-width: var(--content-measure);
  margin-left: auto;
  margin-right: auto;
}

/* Code */
code, pre{ font-family: var(--font-mono); }
code{
  font-size: 0.95em;
  padding: 0.15em 0.35em;
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: 6px;
}
pre{
  border: 1px solid var(--border);
  background: var(--panel);
  border-radius: var(--radius);
  padding: var(--space-3);
  overflow: auto;
  margin: 0 0 var(--space-4);
}
pre code{
  border: 0;
  background: transparent;
  padding: 0;
}

/* Blockquote */
blockquote{
  margin: var(--space-4) 0;
  padding: var(--space-2) var(--space-3);
  border-left: 4px solid var(--border-strong);
  background: var(--panel-2);
}

/* Tables (make wide tables scroll on small screens) */
table{
  border-collapse: collapse;
  width: 100%;
  margin: var(--space-3) 0 var(--space-4);
}
th, td{
  border: 1px solid var(--border);
  padding: 10px;
  text-align: left;
  vertical-align: top;
}
th{ background: var(--panel-2); }
.table-wrap{ overflow-x: auto; }

/* Reuse the HTML-insert components (so Notes can match) */
.kicker{
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .04em;
  font-size: 12px;
  color: var(--muted);
}
.lede{ font-size: 16px; opacity: .92; }

.prompt{
  border-left: 4px solid var(--border-strong);
  background: var(--panel-2);
  padding: 12px;
  margin: var(--space-5) 0;
}

.box{
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px 16px;
  background: var(--panel);
  margin: var(--space-4) 0 var(--space-3);
}

.small{ font-size: 13px; opacity: .92; }
.cite{ font-size: 13px; }

/* Diagrams */
figure.diagram{ margin: var(--space-4) 0; }
figure.diagram img,
figure.diagram svg,
figure.diagram object{
  display: block;
  max-width: 100%;
  height: auto;
}
/* Image captions (site-wide) */
figcaption{
  font-size: 12px;
  color: var(--muted);     /* dark grey in light theme; readable in dark theme */
  font-style: italic;
  text-align: left;
}
figure.diagram figcaption{
  margin-top: 8px;
}

/* Small utility */
.muted{ color: var(--muted); }

/* This is the standard pattern for keeping semantic headings (e.g., an H1 on the Notes index page) without displaying them visually. */
.visually-hidden{
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.site-header{
  border-bottom: 1px solid var(--border);
  background: var(--bg);
}
.site-header .container{
  padding-top: 16px;
  padding-bottom: 16px;
  display: grid;
  grid-template-columns: 1fr auto 1fr;
  align-items: baseline;
  gap: 18px;
}
.site-title a{
  text-decoration: none;
  font-weight: 700;
  color: var(--text);
}
.site-title{ justify-self: start; }

/* Header nav items (inactive = <a.nav-item>, active = <span.nav-item.is-active>) */
.site-nav{ 
  justify-self: center; 
}
.site-nav .nav-item{ 
  margin-left: 14px;
  display: inline-block;
  padding: 2px 10px;
  border: 1px solid transparent;   /* reserve space to avoid shifting when selected*/
  border-radius: 999px;
}
.site-nav .nav-item:first-child{ 
  margin-left: 0;  /* optional, helps centering */
}
/* Inactive link styling */
.site-nav a.nav-item:link,
.site-nav a.nav-item:visited{
  color: var(--text);
  text-decoration: none;
}
.site-nav a.nav-item:hover{
  background: var(--panel-2);
}
.site-nav a.nav-item:focus-visible{
  outline: 2px solid var(--border-strong);
  outline-offset: 2px;
  background: var(--panel-2);
  text-decoration: none;
  color: var(--text);
}

/* Active state: selected pill for the <span> only */
.site-nav span.nav-item.is-active{
  color: var(--text);
  background: var(--panel-2);
  border-color: var(--border);
  text-decoration: none;
  cursor: default;
}

.site-header-spacer{ 
  justify-self: end; 
}

.theme-toggle{
  margin-left: 14px;
  font: inherit;
  font-size: 12px;
  line-height: 1.2;
  padding: 4px 8px;
  border: 1px solid var(--border);
  border-radius: 6px;
  background: var(--panel);
  color: var(--text);
  cursor: pointer;
}
.theme-toggle:hover{
  border-color: var(--border-strong);
}
.site-footer{
  border-top: 1px solid var(--border);
  margin-top: 40px;
}
.site-footer .container{
  padding-top: 18px;
  padding-bottom: 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;
  font-size: 12px;
  line-height: 1.2;
}

.site-footer .muted{ font-size: 12px; line-height: 1.2; }

/* Home page */
.home-hero{
  width: 100vw;
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
}

.home-hero--flush{
  margin-top: calc(-1 * var(--space-6));
}

.home-hero img{
  display: block;
  width: 100%;
  height: auto;
}
.home-hero-caption{
  max-width: var(--container);
  margin: 8px auto 0;
  padding: 0 18px;
}

/* Home links styled similar to Notes index links */
.home-links{
  margin-top: var(--space-5);
  max-width: 640px;     /* adjust to taste */
  margin-left: auto;
  margin-right: auto;
  transform: translateX(-6px); /* add a small left nudge (optical correction) - try -2px to -6px */
}

/* .home-link is for interactive anchors; .home-link-text is for non-interactive fallback text in the same slot. */
.home-link{
  font-size: 0.95rem;
}
.home-link-text{ 
  font-size: 0.9rem;
  font-weight: 600; 
  color: var(--text); 
}
.home-link-prefix{
  font-size: 0.9rem; /* original smaller 12px ≈ 0.75rem (assuming the default root is 16px) */
  color: var(--muted);
  white-space: nowrap;
  text-align: right;     /* right-align text inside the prefix */
  justify-self: end;     /* push prefix to the right edge of the left column */
}

/* link stays naturally left-aligned in the right column; no change needed */
.home-link-item{
  display: grid;
  grid-template-columns: 1fr 1fr;  /* split the row around centre */
  align-items: baseline;
  column-gap: 10px;  /* “little gap” between prefix + link, 8-14px*/
  padding: 8px 0;
}

.home-link:link,
.home-link:active,
.home-link:focus{
  text-decoration: none !important;
  color: var(--link);
  font-weight: 500;
}
.home-link:visited{
  text-decoration: none !important;
  color: var(--link-visited);
  font-weight: 500;
}

.home-link:hover{
  color: var(--link-hover);
  text-decoration: underline;
  text-underline-offset: 2px;
}

.home-link:focus-visible{
  outline: 2px solid var(--border-strong);
  outline-offset: 2px;
}


/* Index lists (shared): supports both new .index__* classes and legacy *-index-* classes */

/* wrappers */
.index,
.work-index,
.work-note-index,
.note-index{
  max-width: var(--content-measure);
  margin-top: var(--space-3);
  margin-left: auto;
  margin-right: auto;
}

/* row layout */
.index__item,
.work-index-item,
.work-note-index-item,
.note-index-item{
  display: grid;
  grid-template-columns: 140px 1fr;
  align-items: baseline;
  column-gap: 10px;
  padding: 8px 0;
}

/* date/prefix column */
.index__date,
.work-index-date,
.work-note-index-date,
.note-index-date{
  font-size: 12px;
  color: var(--muted);
  white-space: nowrap;
  text-align: left;
}

/* link styling */
.index__link:link,
.index__link:active,
.index__link:focus,
.work-index-link:link,
.work-index-link:active,
.work-index-link:focus,
.work-note-index-link:link,
.work-note-index-link:active,
.work-note-index-link:focus,
.note-index-link:link,
.note-index-link:active,
.note-index-link:focus{
  text-decoration: none !important;
  color: var(--link);
  font-weight: 500;
}

.index__link:visited,
.work-index-link:visited,
.work-note-index-link:visited,
.note-index-link:visited{
  text-decoration: none !important;
  color: var(--link-visited);
  font-weight: 500;
}

.index__link:hover,
.work-index-link:hover,
.work-note-index-link:hover,
.note-index-link:hover{
  color: var(--link-hover);
  text-decoration: underline;
  text-underline-offset: 2px;
}

.index__link:focus-visible,
.work-index-link:focus-visible,
.work-note-index-link:focus-visible,
.note-index-link:focus-visible{
  outline: 2px solid var(--border-strong);
  outline-offset: 2px;
}

/* moment layout specific styles */

.moment-body{
  max-width: var(--moment-measure);
  margin-left: auto;
  margin-right: auto;
  white-space: normal; /* IMPORTANT: avoid pre-line to prevent double-spacing artefacts */
}

/* Stanza spacing: paragraphs behave like stanzas */
.moment-body p{
  margin: 0;
}
.moment-body p + p{
  margin-top: 1em; /* tune: 0.75em–1.25em */
}

/* Add an explicit margin for moment figures */
.moment-body figure{ margin: 0; }               /* Reset browser default figure margins inside moments */
.moment-body figure.moment-hero{
  margin: var(--space-3) auto;               /* Then re-introduce deliberate spacing for moment images */
}

/* Prose-only: keep links visibly underlined by default */
.moment-body a:link,
.moment-body a:visited{
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* Prose-only (new structural wrapper): keep links visibly underlined by default */
.content a:link,
.content a:visited{
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* Supplements: links should read like prose by default */
.supplements a:link,
.supplements a:visited{
  text-decoration: underline;
  text-underline-offset: 2px;
}

/* bulletproof moment block, when wrapping markdown moment text in <pre class="moment-text">...</pre> */
pre.moment-text{
  font-family: inherit;
  white-space: pre-wrap;
  background: transparent;
  border: 0;
  padding: 0;
  margin: 0 0 var(--space-4);
}

/* Constrain the moment title to the same measure */
.moment-header{
  max-width: var(--moment-measure);
  margin-left: auto;
  margin-right: auto;
}

/* override global h1 */
.moment-header h1{
  font-size: 20px;
  margin-bottom: 6px;
}

/* Constrain the moment hero image to the same measure */
.moment .moment-hero{
  max-width: var(--moment-measure);
  margin-left: auto;
  margin-right: auto;
}

/* Responsive image within the constrained figure */
.moment .moment-hero img{
  display: block;
  width: 100%;
  max-width: 100%;
  height: auto;
}

@media (max-width: 640px){
  .index__item, .work-index-item, .work-note-index-item, .note-index-item{ grid-template-columns: 1fr; }
  .index__date, .work-index-date, .work-note-index-date, .note-index-date{ text-align: left; }
  .page__row{ grid-template-columns: 1fr; }
  .home-link-item{ grid-template-columns: 1fr; }
  .home-link-prefix{ justify-self: start; text-align: left; }
}

/* _includes  */
.workCard { display:block; text-decoration:none; }
.workCard__img { max-width:240px; width:100%; height:auto; display:block; }
.workCard__title { font-weight:600; }
.workCard__sub { opacity:0.75; font-size:0.95em; }


/* Base components (shared across sections):
Use “structure-first” naming and scope section-specific differences via the root page class
(e.g. .work, .theme, .moment, .research-note).
*/

.page{
  /* generic page wrapper */
}

.page__header{
  max-width: var(--content-measure);
  margin-left: auto;
  margin-right: auto;
}

.page__title{
  margin: 0 0 var(--space-2);
}

.page__meta{
  margin: 0 0 var(--space-3);
}

.page__byline{
  margin: 0 0 var(--space-1);
}

.content{
  max-width: var(--content-measure);
  margin-left: auto;
  margin-right: auto;
  white-space: normal;
}

/* Primary/top media on a page */
.page__media{
  max-width: var(--content-measure);
  margin: var(--space-3) auto;
}

.page__mediaLink{
  display: block;
}

.page__mediaImg{
  display: block;
  width: 100%;
  max-width: 100%;
  height: auto;
}

/* Definition list meta (e.g., Work “Details”) */
.page__dl{
  margin: 0;
}

.page__row{
  display: grid;
  grid-template-columns: 140px 1fr;
  align-items: baseline;
  column-gap: 10px;
  padding: 6px 0;
  border-top: 1px solid var(--border);
}

.page__row:first-child{
  border-top: 0;
}

.page__tag{
  display: inline-block;
  margin-right: 6px;
}

.page__nav{
  max-width: var(--content-measure);
  margin: var(--space-6) auto 0;
}

/* Supplements (HTML inserts, documentation images, attachments lists) */
.supplements{
  max-width: var(--content-measure);
  margin: var(--space-5) auto 0;
}

.supplements__list{
  list-style: none;
  padding-left: 0;
  margin: 0;
}

.supplements__item{
  margin: 0 0 var(--space-2);
}

.supplements__links{
  margin-top: var(--space-2);
}

.supplements__link{
  margin: 0 0 var(--space-1);
}


/* Generic card component (future use; keep workCard as-is for now) */
.card{
  display: block;
  text-decoration: none;
}

.card__thumb{
  display: block;
  max-width: 100%;
  height: auto;
}

.card__title{
  font-weight: 600;
}

.card__meta{
  opacity: 0.75;
  font-size: 0.95em;
}

/* Section wrappers (plural, scoped): */
.works{
  /* works section wrapper */
}

.themes{
  /* themes section wrapper */
}

.moments{
  /* moments section wrapper */
}

.research{
  /* research section wrapper */
}

/* Note: section index pages use the shared `.index` / `.index__*` component classes. */

.work{
  /* work page */
}

/* Works-only enhancements
   If you want a more minimal aesthetic, comment out this entire block.
   (The shared `.page__row` and `.page__tag` rules will still render cleanly.)
*/
.work .page__row > :first-child{
  color: var(--muted);
  font-size: 13px;
}

/* Works tags as “pills”
   To revert to minimal tags, comment out this rule.
*/

.work .page__tag{
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 2px 8px;
  font-size: 13px;
}

/* Works documentation images
   To revert to minimal documentation styling, comment out this block.
*/
.work .supplements__item img{
  border: 1px solid var(--border);
  border-radius: 6px;
}

.work .supplements__item + .supplements__item{
  margin-top: var(--space-3);
}
.theme{
/* theme page */
}
.moment{
/* moment page */
}
.research-note{
/* research note page */
}